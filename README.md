## ğŸŒé¡¹ç›®ä»‹ç»

ä¸€ä¸ªä¸°å¯Œçš„ API å¼€æ”¾è°ƒç”¨å¹³å°ã€‚

ä¸€èˆ¬æ¥è¯´ï¼ŒAPIç½‘å…³æ˜¯è¿è¡Œäºå¤–éƒ¨è¯·æ±‚ä¸å†…éƒ¨æœåŠ¡ä¹‹é—´çš„ä¸€ä¸ªæµé‡å…¥å£ï¼Œå®ç°å¯¹å¤–éƒ¨è¯·æ±‚çš„åè®®è½¬æ¢ã€é‰´æƒã€æµæ§ã€å‚æ•°æ ¡éªŒã€ç›‘æ§ç­‰é€šç”¨åŠŸèƒ½ã€‚APIå¹³å°æœ‰å¾ˆå¤šï¼Œä½†æ˜¯ä¸å¤Ÿç»Ÿä¸€ï¼Œæœ¬å¹³å°å¸®åŠ©ä¼ä¸šã€ä¸ªäººç»Ÿä¸€å¼€æ”¾æ¥å£ï¼Œç»Ÿä¸€æä¾›é‰´æƒã€é™æµã€ç†”æ–­ç­‰éä¸šåŠ¡åŸºç¡€èƒ½åŠ›ã€‚ å‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œä¸ºä¸šåŠ¡é«˜æ•ˆèµ‹èƒ½ã€‚åŠ›æ±‚ç»™ç”¨æˆ·æä¾›ç®€æ´ã€å®ç”¨çš„æ¥å£è°ƒç”¨ä½“éªŒï¼Œå¹¶ä¸”ä½¿ç”¨æ•°å­—ç­¾åæ ¡éªŒä¿éšœæ¥å£è°ƒç”¨çš„å®‰å…¨æ€§ã€‚

![img](https://bugstack.cn/images/article/assembly/api-gateway/api-gateway-220809-01.png?raw=true) 

å¯¹äºå…¬å¸æ¥è¯´ï¼ŒåŸæœ¬ä¸€ä¸ªåºå¤§çš„å•ä½“åº”ç”¨ï¼ˆAll in oneï¼‰ä¸šåŠ¡ç³»ç»Ÿè¢«æ‹†åˆ†æˆè®¸å¤šå¾®æœåŠ¡ï¼ˆMicroserviceï¼‰ç³»ç»Ÿè¿›è¡Œç‹¬ç«‹çš„ç»´æŠ¤å’Œéƒ¨ç½²ï¼ŒæœåŠ¡æ‹†åˆ†å¸¦æ¥çš„å˜åŒ–æ˜¯APIçš„è§„æ¨¡æˆå€å¢é•¿ï¼ŒAPIçš„ç®¡ç†éš¾åº¦ä¹Ÿåœ¨æ—¥ç›Šå¢åŠ ï¼Œä½¿ç”¨APIç½‘å…³å‘å¸ƒå’Œç®¡ç†APIé€æ¸æˆä¸ºä¸€ç§è¶‹åŠ¿ã€‚ 

æ­¤å¤–ï¼Œæœ¬äººåœ¨ç¾å›¢å®ä¹ è¿‡ç¨‹ä¸­å‘ç°å…¬å¸æœ‰è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£çš„ä¸šåŠ¡ï¼Œå¹¶ä¸”åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¹Ÿæœ‰è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£çš„å°è¯•ï¼Œæ¯”å¦‚æ‰‹æœºçŸ­ä¿¡æ¥å£ï¼Œè§†é¢‘ç‚¹æ’­æ¥å£ï¼Œæ”¯ä»˜æ¥å£ç­‰ç­‰ï¼Œä¸€ç›´å¥½å¥‡ç¬¬ä¸‰æ–¹æ¥å£çš„æœåŠ¡æä¾›æ–¹æ˜¯å¦‚ä½•å®ç°å®‰å…¨ï¼Œæ–¹ä¾¿ï¼Œå¿«æ·çš„æ¥å£çš„è°ƒç”¨ä½“éªŒï¼Œé‚èŒç”Ÿäº†ä¸€ä¸ªè‡ªå·±å†™ä¸€ä¸ªAPIæ¥å£å¹³å°çš„æƒ³æ³•ï¼Œäºæ˜¯è¯¥é¡¹ç›®è¯ç”Ÿäº†ã€‚

 

## âœ¨ é«˜å¯ç”¨

### ç¨³å®šæ€§ä¿éšœ

æä¾›äº†ä¸€äº›å¸¸è§„çš„ç¨³å®šæ€§ä¿éšœæ‰‹æ®µï¼Œæ¥ä¿è¯è‡ªèº«å’Œåç«¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![å›¾ 12](https://p0.meituan.net/travelcube/5d5f296cd05fbba6c73904c6b65ecc88199503.png)

- **æµé‡ç®¡æ§**ï¼šä»ç”¨æˆ·è‡ªå®šä¹‰UUIDé™æµã€Appé™æµã€IPé™æµã€é›†ç¾¤é™æµç­‰å¤šä¸ªç»´åº¦æä¾›æµé‡ä¿æŠ¤ã€‚
- **è¯·æ±‚ç¼“å­˜**ï¼šå¯¹äºä¸€äº›å¹‚ç­‰çš„ã€æŸ¥è¯¢é¢‘ç¹çš„ã€æ•°æ®åŠæ—¶æ€§ä¸æ•æ„Ÿçš„è¯·æ±‚ï¼Œä¸šåŠ¡ç ”å‘äººå‘˜å¯å¼€å¯è¯·æ±‚ç¼“å­˜åŠŸèƒ½ã€‚
- **è¶…æ—¶ç®¡ç†**ï¼šæ¯ä¸ªAPIéƒ½è®¾ç½®äº†å¤„ç†è¶…æ—¶æ—¶é—´ï¼Œå¯¹äºè¶…æ—¶çš„è¯·æ±‚ï¼Œè¿›è¡Œå¿«é€Ÿå¤±è´¥çš„å¤„ç†ï¼Œé¿å…èµ„æºå ç”¨ã€‚
- **ç†”æ–­é™çº§**ï¼šæ”¯æŒç†”æ–­é™çº§åŠŸèƒ½ï¼Œå®æ—¶ç›‘æ§è¯·æ±‚çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œè¾¾åˆ°é…ç½®çš„å¤±è´¥é˜ˆå€¼åï¼Œè‡ªåŠ¨ç†”æ–­ï¼Œè¿”å›é»˜è®¤å€¼ã€‚

### è¯·æ±‚å®‰å…¨

è¯·æ±‚å®‰å…¨æ˜¯APIç½‘å…³éå¸¸é‡è¦çš„èƒ½åŠ›ï¼Œç›®å‰å·²æ¥å…¥è¯·æ±‚ç­¾åã€‚ 

### ç›‘æ§å‘Šè­¦

**ç«‹ä½“åŒ–ç›‘æ§** 

æä¾›360åº¦çš„ç«‹ä½“åŒ–ç›‘æ§ï¼Œä»ä¸šåŠ¡æŒ‡æ ‡ã€æœºå™¨æŒ‡æ ‡ã€JVMæŒ‡æ ‡æä¾›7x24å°æ—¶çš„ä¸“ä¸šå®ˆæŠ¤ï¼Œå¦‚ä¸‹è¡¨ï¼š 

|      | ç›‘æ§æ¨¡å— | ä¸»è¦åŠŸèƒ½                                                     |
| ---- | -------- | ------------------------------------------------------------ |
| 1    | ç»Ÿä¸€ç›‘æ§ | å®æ—¶ä¸ŠæŠ¥è¯·æ±‚è°ƒç”¨ä¿¡æ¯ã€ç³»ç»ŸæŒ‡æ ‡ï¼Œè´Ÿè´£åº”ç”¨å±‚ï¼ˆJVMï¼‰ç›‘æ§ã€ç³»ç»Ÿå±‚ï¼ˆCPUã€IOã€ç½‘ç»œï¼‰ç›‘æ§ |
| 2    | é“¾è·¯è¿½è¸ª | è´Ÿè´£å…¨é“¾è·¯å‚æ•°é€ä¼ ã€å…¨é“¾è·¯è¿½è¸ªç›‘æ§                           |
| 3    | æ—¥å¿—ç›‘æ§ | ç›‘æ§æœ¬åœ°æ—¥å¿—å¼‚å¸¸å…³é”®å­—ï¼šå¦‚5xxçŠ¶æ€ç ã€ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰            |

**å¤šç»´åº¦å‘Šè­¦**

æœ‰äº†å…¨é¢çš„ç›‘æ§ä½“ç³»ï¼Œè‡ªç„¶å°‘ä¸äº†é…å¥—çš„å‘Šè­¦æœºåˆ¶ï¼Œä¸»è¦çš„å‘Šè­¦èƒ½åŠ›åŒ…æ‹¬ï¼š 

|      | ç›‘æ§æ¨¡å—     | ä¸»è¦åŠŸèƒ½                                  |
| ---- | ------------ | ----------------------------------------- |
| 1    | é™æµå‘Šè­¦     | APIè¯·æ±‚è¾¾åˆ°é™æµè§„åˆ™é˜ˆå€¼è§¦å‘é™æµå‘Šè­¦       |
| 2    | è¯·æ±‚å¤±è´¥å‘Šè­¦ | è¯·æ±‚è¶…æ—¶ã€åç«¯æœåŠ¡å¼‚å¸¸ç­‰è§¦å‘è¯·æ±‚å¤±è´¥å‘Šè­¦  |
| 3    | APIå¼‚å¸¸å‘Šè­¦  | APIå‘å¸ƒå¤±è´¥ã€APIæ£€æŸ¥å¼‚å¸¸æ—¶è§¦å‘APIå¼‚å¸¸å‘Šè­¦ |



## ğŸ¨ æ¶æ„

### æ§åˆ¶é¢

ä½¿ç”¨APIç½‘å…³çš„æ§åˆ¶é¢ï¼Œä¸šåŠ¡ç ”å‘äººå‘˜å¯ä»¥è½»æ¾çš„å®ŒæˆAPIçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆéƒ¨åˆ†åŠŸèƒ½æš‚æœªå®ç°ï¼‰ï¼š 

![img](https://p0.meituan.net/travelcube/70ebfcddcb50909c120b091db3835098216890.png) 

ä¸šåŠ¡ç ”å‘äººå‘˜ä»åˆ›å»ºAPIå¼€å§‹ï¼Œå®Œæˆå‚æ•°å½•å…¥ï¼›æ¥ç€å¯ä»¥é€šè¿‡æ–‡æ¡£å’ŒMOCKåŠŸèƒ½è¿›è¡ŒAPIæµ‹è¯•ï¼›APIæµ‹è¯•å®Œæˆåï¼Œä¸ºäº†ä¿è¯ä¸Šçº¿ç¨³å®šæ€§ï¼Œæä¾›äº†å‘å¸ƒå®¡æ‰¹çš„å®‰å…¨ä¿è¯æªæ–½ï¼›APIè¿è¡ŒæœŸé—´ä¼šç›‘æ§APIçš„è°ƒç”¨å¤±è´¥æƒ…å†µã€è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä¸€æ—¦å‘ç°å¼‚å¸¸åŠæ—¶å‘å‡ºå‘Šè­¦ï¼›æœ€åï¼Œå¯¹äºä¸å†ä½¿ç”¨çš„APIè¿›è¡Œä¸‹çº¿æ“ä½œåï¼Œä¼šå›æ”¶APIæ‰€å ç”¨çš„å„ç±»èµ„æºå¹¶ç­‰å¾…é‡æ–°å¯ç”¨ã€‚

æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå…¨éƒ¨é€šè¿‡é…ç½®åŒ–ã€æµç¨‹åŒ–çš„æ–¹å¼ï¼Œç”±ä¸šåŠ¡ç ”å‘äººå‘˜å…¨è‡ªåŠ©ç®¡ç†ï¼Œæå¤§åœ°æå‡äº†ç ”å‘æ•ˆç‡ã€‚

### é…ç½®ä¸­å¿ƒ

ç”¨äºå‘APIç½‘å…³çš„æ•°æ®é¢ä¸‹å‘APIçš„è·¯ç”±ã€è§„åˆ™ã€ç»„ä»¶ç­‰é…ç½®å˜æ›´ã€‚

é…ç½®ä¸­å¿ƒçš„è®¾è®¡ä¸Šä½¿ç”¨Nacosç»Ÿä¸€é…ç½®ç®¡ç†å’Œæœ¬åœ°ç¼“å­˜ç»“åˆçš„æ–¹å¼ï¼Œå®ç°åŠ¨æ€é…ç½®ï¼Œä¸åœæœºå‘å¸ƒã€‚ 

### æ•°æ®é¢

å½“è¯·æ±‚æµé‡å‘½ä¸­APIè¯·æ±‚è·¯å¾„è¿›å…¥æœåŠ¡ç«¯ï¼Œå…·ä½“å¤„ç†é€»è¾‘ç”±ä¸€ç³»åˆ—åŠŸèƒ½ç»„ä»¶å®Œæˆã€‚ç½‘å…³æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶é›†æˆï¼ŒåŒ…æ‹¬é“¾è·¯è¿½è¸ªã€å®æ—¶ç›‘æ§ã€è®¿é—®æ—¥å¿—ã€å‚æ•°æ ¡éªŒã€é‰´æƒã€é™æµã€ç†”æ–­é™çº§ç­‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆéƒ¨åˆ†åŠŸèƒ½æš‚æœªå®ç°ï¼‰ï¼š

![å›¾ 6](https://p1.meituan.net/travelcube/8d9184431f36f8e2b1f4cd396fbc71ae221623.png) æŠ½è±¡æ¨¡å‹å±‚å’Œä¸šåŠ¡å±‚ä»£ç ä¸ºå…¬å…±æ¨¡å—ï¼Œä½¿ç”¨ Dubbo RPC æ¡†æ¶å®ç°å­ç³»ç»Ÿé—´çš„æ¥å£è°ƒç”¨ 

å®¢æˆ·ç«¯ SDK å°½é‡ç”¨æœ€å°‘çš„ä¾èµ–ï¼ŒåŸºäº Spring Boot Starter è‡ªä¸»è®¾è®¡ SDK ï¼Œä¿è¯ SDK çš„ç²¾ç®€ã€é¿å…ä¾èµ–å†²çª 

![æµç¨‹å›¾](https://ace-file.oss-cn-shenzhen.aliyuncs.com/articles/%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

- api-common ï¼šå…¬å…±å°è£…ç±»ï¼ˆå¦‚å…¬å…±å®ä½“ã€å…¬å…±å¸¸é‡ï¼Œç»Ÿä¸€å“åº”å®ä½“ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼‰
- api-backend ï¼šæ¥å£ç®¡ç†å¹³å°ï¼Œä¸»è¦åŒ…æ‹¬ç”¨æˆ·ã€æ¥å£ç›¸å…³çš„åŠŸèƒ½
- api-gateway ï¼šç½‘å…³æœåŠ¡ï¼Œæ¶‰åŠåˆ°æ¥å£æ•°æ®ä¸€è‡´æ€§å¤„ç† ï¼Œç½‘å…³é™æµï¼Œç»Ÿä¸€é‰´æƒï¼Œç»Ÿä¸€æ—¥å¿—å¤„ç†ï¼Œæµé‡æŸ“è‰²ï¼Œæ¥å£ç»Ÿè®¡ç­‰ç­‰
- api-interfaceï¼šæ¥å£æœåŠ¡ï¼Œæä¾›å¯ä¾›è°ƒç”¨çš„æ¥å£
- api-client-sdkï¼šæä¾›ç»™å¼€å‘è€…çš„ SDK



## ğŸŒŸ æ¨¡å—

###  æ•°æ®mockæ¨¡å—

- å¿«é€Ÿç”Ÿæˆå»ºè¡¨è¯­å¥ã€æ¨¡æ‹Ÿæ•°æ®å’Œä»£ç ï¼Œä¾¿äºå¿«é€Ÿæµ‹è¯•æ¥å£
- æ”¯æŒå¤šç§ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®çš„è§„åˆ™ï¼Œæ¯”å¦‚å›ºå®šå€¼ã€éšæœºå€¼ã€æ­£åˆ™è¡¨è¾¾å¼ã€é€’å¢å€¼

### æ¥å£æ¨¡å—

- æ¥å£åˆ—è¡¨ï¼Œå…·ä½“æ¥å£å‡ºå…¥å‚ï¼Œç¤ºä¾‹ç­‰å±•ç¤º
- æµè§ˆæ¥å£åŠåœ¨çº¿è°ƒè¯•ï¼ŒğŸš€å®æ—¶ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°å¹¶ç¦»çº¿ä¿å­˜
- ğŸš€æ•°å­—ç­¾åæ ¡éªŒæ¥å£è°ƒç”¨æƒé™ï¼Œæ”¯æŒSDKè°ƒç”¨æ¥å£ 
- æ”¯æŒè°ƒç”¨é‡ç»Ÿè®¡ï¼Œå¦‚è°ƒç”¨é‡TOP3æ’è¡Œé¥¼çŠ¶å›¾
- ç›®å‰å·²å¯¹æ¥AIï¼Œæ ‡ç­¾èšåˆç­‰ç¬¬ä¸‰æ–¹èƒ½åŠ›ï¼Œè¿˜åœ¨æŒç»­æ¥å…¥ä¸­
- ğŸš€æ”¯æŒå¯¹æ¥å£æ‰“æ ‡ï¼Œè¿›è¡Œç›¸ä¼¼æ¥å£æ¨èï¼ˆç±»æ¯”å¤§æ•°æ®çš„æ£€ç´¢=>å¬å›=ç²—æ’=>ç²¾æ’=>é‡æ’ï¼‰

### ç®¡ç†å‘˜æ¨¡å—

- æ¥å£å®æ—¶ä¸Šä¸‹çº¿ï¼Œä¿¡æ¯å˜æ›´ï¼ŒğŸš€æµé‡ä¿æŠ¤
- ç”¨æˆ·åˆ—è¡¨ç®¡ç†ï¼Œæ•°æ®æƒé™å˜æ›´ï¼ŒğŸš€åç»­æ”¯æŒé‡åŒ–äººç¾¤ç­‰
- æ¥å£å……å€¼ï¼Œå³ä¿®æ”¹ç”¨æˆ·çš„æ¥å£è°ƒç”¨é‡

### ç”¨æˆ·æ¨¡å—

- æ³¨å†Œï¼Œç™»å½•ï¼ˆåŒ…æ‹¬è´¦å·å¯†ç å’Œæ‰«ç ç­‰æ–¹å¼ï¼‰
- ğŸš€å¯¹æ¥ä¸ªäººå…¬ä¼—å·ï¼Œæä¾›è·å–åŠ¨æ€ç ã€å…³æ³¨å›å¤ç­‰åŠŸèƒ½
- ğŸš€æ›´æ”¹å¼€å‘è€…å¯†é’¥ï¼ˆakï¼Œskï¼‰ï¼Œä¸‹è½½å¼€æ”¾å®¢æˆ·ç«¯sdk
- ä¸ªäººä¸»é¡µï¼Œè®¾ç½®ä¸ªäººåŸºæœ¬ä¿¡æ¯ï¼Œä¸Šä¼ å¤´åƒç­‰

### å…¶ä»–

- æ•°æ®åˆ†æï¼šå¯¼å…¥æ•°æ®é›†å¹¶è¾“å…¥åˆ†æè¯‰æ±‚ï¼Œå³å¯è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å›¾æ ‡ä»¥åŠåˆ†æç»“è®ºï¼ŒğŸš€åç»­æ”¯æŒæ¥å£è°ƒç”¨åˆ†æ
- èšåˆæœç´¢ï¼šé›†ä¸­æœç´¢ä¸åŒæ¥æºçš„æ¥å£æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œæå‡ç”¨æˆ·æ¥å…¥æ•ˆç‡
- ğŸš€ç¬¬ä¸‰æ–¹æ”¯ä»˜æ¥å…¥ä¸­ï¼Œå¢åŠ ä¼šå‘˜æ¨¡å—



## âœ¨ æŠ€æœ¯äº®ç‚¹


### èšåˆæœç´¢
- ä¸ºæé«˜èšåˆæœç´¢æ¥å£çš„é€šç”¨æ€§ï¼Œé¦–å…ˆé€šè¿‡å®šä¹‰æ•°æ®æºæ¥å£æ¥å®ç°ç»Ÿä¸€çš„æ•°æ®æºæ¥å…¥æ ‡å‡†(æ¯”å¦‚æ–°æ•°æ®æºå¿…é¡»æ”¯æŒåˆ†é¡µ)ï¼›å½“æ–°æ•°æ®æº(æ¯”å¦‚è§†é¢‘)è¦æ¥å…¥æ—¶ï¼Œåªéœ€ä½¿ç”¨é€‚é…å™¨æ¨¡å¼å¯¹å…¶æ•°æ®æŸ¥è¯¢æ¥å£è¿›è¡Œå°è£…ã€ä»¥é€‚é…æ•°æ®æºæ¥å£ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚
- ä¸ºå‡å°‘ä»£ç çš„åœˆå¤æ‚åº¦ï¼Œä½¿ç”¨æ³¨å†Œå™¨æ¨¡å¼ä»£æ›¿if elseæ¥ç®¡ç†å¤šä¸ªæ•°æ®æºå¯¹è±¡ï¼Œè°ƒç”¨æ–¹å¯æ ¹æ®åç§°è½»æ¾è·å–å¯¹è±¡ã€‚

### mockæ•°æ®ç”Ÿæˆå’Œåˆ†æ

- å°†æ¯ç§ç”Ÿæˆç±»å‹å®šä¹‰ä¸ºä¸€ä¸ª Builderï¼šå¯¹äº Javaä»£ç ç”Ÿæˆå™¨ï¼ˆJavaCodeBuilderã€FrontendCodeBuilderï¼‰ï¼Œä½¿ç”¨ FreeMarker æ¨¡æ¿å¼•æ“æ¥ç”Ÿæˆï¼Œè‡ªå®šä¹‰æ¨¡æ¿å¼•æ“é…ç½®Beanã€‚
- æ¯ç§ç”Ÿæˆè§„åˆ™å®šä¹‰ä¸ºä¸€ä¸ª Generatorï¼Œä½¿ç”¨ DataGeneratorFactoryï¼ˆå·¥å‚æ¨¡å¼ï¼‰å¯¹å¤šä¸ª Generator å®ä¾‹è¿›è¡Œç»Ÿä¸€çš„åˆ›å»ºå’Œç®¡ç†ã€‚ä½¿ç”¨å•ä¾‹æ¨¡å¼èŠ‚çœæ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºç”Ÿæˆå™¨çš„å¼€é”€ã€‚
- ä½¿ç”¨é—¨é¢æ¨¡å¼èšåˆå„ç§ç”Ÿæˆç±»å‹ï¼Œæä¾›ç»Ÿä¸€çš„ç”Ÿæˆè°ƒç”¨å’Œæ ¡éªŒæ–¹æ³•ï¼Œå‡å°‘é‡å¤è¯·æ±‚ã€‚
- äºAIGCçš„è¾“å…¥Tokené™åˆ¶ï¼Œä½¿ç”¨Easy Excelè§£æç”¨æˆ·ä¸Šä¼ çš„XLSXè¡¨æ ¼æ•°æ®æ–‡ä»¶å¹¶å‹ç¼©ä¸ºCSVï¼Œå®æµ‹æé«˜äº†20%çš„å•æ¬¡è¾“å…¥æ•°æ®é‡ã€‚

### æ¥å£è°ƒç”¨

- è‡ªå®šä¹‰æœ¬åœ°ç¼“å­˜åŠ è½½å™¨ï¼Œç”¨äºçƒ­ç‚¹æ¥å£åˆ—è¡¨çš„ç¼“å­˜é¢„çƒ­å’Œå˜æ›´ç­‰

- ä¸ºé˜²æ­¢æ¥å£è¢«æ¶æ„è°ƒç”¨ï¼Œè®¾è®¡APIç­¾åè®¤è¯ç®—æ³•ï¼Œä¸ºç”¨æˆ·åˆ†é…å”¯ä¸€ak/ skä»¥é‰´æƒï¼Œä¿éšœè°ƒç”¨çš„å®‰å…¨æ€§ã€å¯æº¯æºæ€§ï¼ˆä¾¿äºç»Ÿè®¡æ¥å£è°ƒç”¨æ¬¡æ•°ï¼‰ã€‚

- ä¸ºè§£å†³å¼€å‘è€…è°ƒç”¨æˆæœ¬è¿‡é«˜çš„é—®é¢˜ï¼ˆé¡»è‡ªå·±ä½¿ç”¨HTTP +å°è£…ç­¾åå»è°ƒç”¨æ¥å£ï¼Œå¹³å‡20è¡Œå·¦å³ä»£ç ï¼‰ï¼ŒåŸºäºSpring Boot Starterå¼€å‘äº†å®¢æˆ·ç«¯SDKï¼Œä¸€è¡Œä»£ç å³å¯è°ƒç”¨æ¥å£ï¼Œæé«˜å¼€å‘ä½“éªŒã€‚

- é€‰ç”¨Spring Cloud Gatewayä½œä¸ºAPIç½‘å…³ï¼Œå®ç°äº†è·¯ç”±è½¬å‘ã€è®¿é—®æ§åˆ¶ã€æµé‡æŸ“è‰²ï¼Œå¹¶é›†ä¸­å¤„ç†ç­¾åæ ¡éªŒã€è¯·æ±‚å‚æ•°æ ¡éªŒã€æ¥å£è°ƒç”¨ç»Ÿè®¡ç­‰ä¸šåŠ¡é€»è¾‘ï¼Œæé«˜å®‰å…¨æ€§çš„åŒæ—¶ã€ä¾¿äºç³»ç»Ÿå¼€å‘ç»´æŠ¤ã€‚

- ç»Ÿä¸€å…¨å±€å¼‚å¸¸ï¼Œæ¥å£èƒ½åŠ›æ”¶æ•›ï¼š
  ![image-20230803231722291](https://ace-file.oss-cn-shenzhen.aliyuncs.com/articles/image-20230803222319726.png)

  ![image-20230803222319726](https://ace-file.oss-cn-shenzhen.aliyuncs.com/articles/image-20230803231722291.png)



### å…¶ä»–

- ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œé€‰ç”¨Ant Design Proè„šæ‰‹æ¶å¿«é€Ÿæ­å»ºåŸºç¡€é¡µé¢,å¹¶å¯¹åŸå§‹æ¨¡æ¿è¿›è¡Œç˜¦èº«ã€æŠ½è±¡ä¸ºå¯å¤ç”¨çš„å…¬å…±æ¨¡æ¿ï¼Œä¾¿äºåç»­åŒç±»é¡¹ç›®çš„å¿«é€Ÿç ”å‘ã€‚
- ä¸ºäº†æ˜ç¡®æ¥å£çš„è¿”å›ï¼Œè‡ªå®šä¹‰ç»Ÿä¸€çš„é”™è¯¯ç ,å¹¶å°è£…äº†å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œä»è€Œè§„èŒƒäº†å¼‚å¸¸è¿”å›ã€å±è”½äº†é¡¹ç›®å†—ä½™çš„æŠ¥é”™ç»†èŠ‚ã€‚
- ä½¿ç”¨ç¼–è¾‘è·ç¦»ç®—æ³•å®ç°äº†æ ¹æ®æ ‡ç­¾åŒ¹é…æœ€ç›¸ä¼¼ç”¨æˆ·çš„åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä¼˜å…ˆé˜Ÿåˆ—æ¥å‡å°‘TOP Nè¿ç®—è¿‡ç¨‹ä¸­çš„å†…å­˜å ç”¨ã€‚
- ä½¿ç”¨WxJava SDKä»£æ›¿HttpClient æ–¹å¼å®ç°OAuth2å¾®ä¿¡æˆæƒç™»å½•ã€æ¨¡æ¿æ¶ˆæ¯æ¨é€ï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ã€‚



## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯

- å¼€å‘æ¡†æ¶ï¼šReactã€Umi
- è„šæ‰‹æ¶ï¼šAnt Design Pro
- ç»„ä»¶åº“ï¼šAnt Designã€Ant Design Components
- è¯­æ³•æ‰©å±•ï¼šTypeScriptç±»å‹æ§åˆ¶ã€Less
- æ‰“åŒ…å·¥å…·ï¼šWebpack
- ä»£ç è§„èŒƒï¼šESLintã€StyleLintã€Prettier
- å›¾è¡¨ï¼šECharts

- ä¾èµ–ï¼šmonaco-editor ä»£ç ç¼–è¾‘å™¨ã€copy-to-clipboard å‰ªåˆ‡æ¿å¤åˆ¶

### åç«¯

- è¯­è¨€ï¼šJava 8
- å¼€å‘æ¡†æ¶ï¼šSpringBoot 2.xï¼ŒDubbo åˆ†å¸ƒå¼ï¼ˆRPCã€Nacosï¼‰ã€Spring Cloud Gateway å¾®æœåŠ¡ç½‘å…³
- æ•°æ®è®¿é—®ï¼šMyBatis + MyBatis Plus
- é¡¹ç›®ç®¡ç†ï¼šMaven
- æ¥å£æ–‡æ¡£ï¼šSwagger + Knife4j
- ä¸­é—´ä»¶ï¼šRedisã€Elasticsearchã€RabbitMQ
- å¯¹è±¡å­˜å‚¨ï¼šé˜¿é‡Œäº‘COS
- web æœåŠ¡ï¼šNginxå‰ç«¯éƒ¨ç½²ï¼Œå®å¡” Linuxè¿ç»´
- å…¶ä»–ï¼šSpring AOPã€API ç­¾åè®¤è¯ï¼ˆHttp è°ƒç”¨ï¼‰ã€Spring Boot Starterï¼ˆSDK å¼€å‘ï¼‰
- ä¾èµ–ï¼šFreeMarkerï¼šæ¨¡æ¿å¼•æ“ã€Druidï¼šSQL è§£æã€datafakerï¼šæ¨¡æ‹Ÿæ•°æ®ã€Easy Excelï¼šExcel å¯¼å…¥å¯¼å‡ºã€Hutoolã€Apache Common Utilsã€Gson ç­‰å·¥å…·åº“ã€Redisson åˆ†å¸ƒå¼é” ã€dataFaker 



## ğŸŒˆ å¹³å°æ¥å…¥

åŸºäº Spring Boot Starter å¼€å‘ï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼Œä½¿ç”¨å¼ºå¤§çš„ç¬¬ä¸‰æ–¹æ¥å£èƒ½åŠ›ï¼

### å¿«é€Ÿå¼€å§‹

#### 0ã€å¼•å…¥ sdk

```xml
<dependency>
    <groupId>com.pc</groupId>
    <artifactId>api-client-sdk</artifactId>
    <version>0.0.3</version>
</dependency>
```

#### 1ã€æ³¨å†Œåè·å–å¼€å‘è€…å¯†é’¥å¯¹

#### 2ã€åˆå§‹åŒ– ApiClientå¯¹è±¡

æ–¹æ³• 1ï¼šè‡ªä¸» new å¯¹è±¡

```java
String accessKey = "ä½ çš„ accessKey";
String secretKey = "ä½ çš„ secretKey";
ApiClient client = new ApiClient(accessKey, secretKey);
```

æ–¹æ³• 2ï¼šé€šè¿‡é…ç½®æ³¨å…¥å¯¹è±¡

ä¿®æ”¹é…ç½®ï¼š

```yaml
api:
  client:
    access-key: ä½ çš„ access-key
    secret-key: ä½ çš„ secret-key
```

ä½¿ç”¨å®¢æˆ·ç«¯å¯¹è±¡ï¼š

```java
@Resource
private ApiClient client;
```

#### 3ã€æ„é€ è¯·æ±‚å‚æ•°

```java
User user = new User();
user.username("pengchang");
```

#### 4ã€è·å–å“åº”ç»“æœ

```java
String response = client.getUsernameByPost(devChatRequest);
System.out.println(response);
```



### API æ–‡æ¡£

#### AI å¯¹è¯

æ–¹æ³•åï¼šdoChat

è¯·æ±‚å‚æ•°ï¼š

- messageï¼šè¦å‘é€çš„æ¶ˆæ¯ï¼Œä¸è¶…è¿‡ 1024 å­—

å“åº”ç»“æœï¼š

- codeï¼šå“åº”çŠ¶æ€ç 
- dataï¼š 
  - contentï¼šå¯¹è¯ç»“æœå†…å®¹
- messageï¼šå“åº”ä¿¡æ¯

ç¤ºä¾‹ä»£ç ï¼š

```java
// æ„é€ è¯·æ±‚
AIRequest request = new AIRequest();
devChatRequest.setModelId(1651468516836098050L);
request.setText("ä½ å¥½");

// è·å–å“åº”
String response = client.doChat(devChatRequest);
System.out.println(response;
```



### Http æ¥å…¥

1. è·å– **AccessKey** å’Œ **SecretKey**

2. è¯·æ±‚ä¿¡æ¯

   URL ï¼š[https://120.25.220.64:8090/api/ai/chat]()
   è¯·æ±‚æ–¹æ³•ï¼šPOST
   è¯·æ±‚å¤´ï¼š

   | è¯·æ±‚å¤´åç§° | å€¼                                        | ç¤ºä¾‹å€¼                                                       |
   | ---------- | ----------------------------------------- | ------------------------------------------------------------ |
   | accessKey  | accessKey                                 | 9vtw6bx8eh65uu5q62a8nhqdjf2asapp                             |
   | nonce      | å››ä½éšæœºæ•´æ•°                              | 1234                                                         |
   | body       | è¯·æ±‚å‚æ•°çš„ md5 åŠ å¯†å€¼ï¼Œè¯·æ±‚å‚æ•°è¯¦æƒ…è§ä¸‹æ–¹ | cf2623df4bf9d0485b0ab9392cbcef11                             |
   | timestamp  | å½“å‰æ—¶é—´æˆ³ï¼ˆå•ä½ç§’ï¼‰                      | 1687775370                                                   |
   | sign       | ç­¾åï¼Œè¯¦æƒ…è§ä¸‹æ–¹                          | d10ce4n429778060c0af1d5f3f388d39953e74d996022e6182094fa3a84adbe9 |

3. è¯·æ±‚å‚æ•°

   | text | æ¶ˆæ¯ï¼ˆé—®é¢˜ï¼‰ |
   | ---- | ------------ |
   | text | æ¶ˆæ¯ï¼ˆé—®é¢˜ï¼‰ |

4. ç­¾åè®¤è¯ 

   ç­¾åçš„å€¼æ˜¯ **è¯·æ±‚å‚æ•°çš„ md5 åŠ å¯†å€¼ + . + SecretKey çš„å€¼è¿›è¡Œ SHA256 åŠ å¯†**

5. ç¤ºä¾‹ä»£ç ï¼ˆ Python ï¼‰

   ```python
   import hashlib
   import time
   import random
   import requests
   import json
   
   
   class DevChatRequest:
       def __init__(self, text: str):
           self.text = message
   
       def to_dict(self):
           return {
               "text" : self.text
           }
   
   class YuCongMingClient:
       HOST = 'https://120.25.220.64:8090/api/ai/chat'
   
       def __init__(self, access_key, secret_key):
           self.access_key = access_key
           self.secret_key = secret_key
   
       def do_chat(self, dev_chat_request: DevChatRequest):
           url = self.HOST
           json_data = json.dumps(dev_chat_request.to_dict())
           headers = self.get_headers(json_data)
           response = requests.post(url, headers=headers, data=json_data)
           return response.json()
   
       def get_headers(self, json_data):
           encode_body = self.encode_body(json_data)
           headers = {
               'Content-Type': 'application/json',
               'accessKey': self.access_key,
               'nonce': self.generate_nonce(),
               'body': encode_body,
               'timestamp': str(int(time.time())),
               'sign': self.generate_sign(encode_body)
           }
           return headers
   
       def generate_nonce(self):
           return str(random.randint(1000, 9999))
   
       def encode_body(self, json_data):
           md5 = hashlib.md5()
           md5.update(json_data.encode('utf-8'))
           return md5.hexdigest()
   
       def generate_sign(self, json_data):
           sha256 = hashlib.sha256()
           sign_str = json_data + "." +self.secret_key
           sha256.update(sign_str.encode('utf-8'))
           return sha256.hexdigest()
   
   
   if __name__ == '__main__':
       accessKey = "ä½ çš„ accessKey";
       secretKey = "ä½ çš„ secretKey";
       client = AIClient(accessKey, secretKey)
       print(client.do_chat(DevChatRequest("ä½ å¥½")))
   
   ```

6. è¿”å›çŠ¶æ€ç 

   | Code | Message | è§£é‡Š |
   | ---- | ------- | ---- |
   | 0    | ok      |      |

   | 40000 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å‚æ•°åæ˜¯å¦åŒ¹é…ã€é•¿åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ç­‰ |
   | 40100 | æœªç™»å½• |
   | 40101 | æ— æƒé™ | å¯èƒ½æ˜¯ç”±nonceã€timestampã€sign å¼‚å¸¸å¼•èµ· |
   | 40400 | è¯·æ±‚æ•°æ®ä¸å­˜åœ¨ | akã€æ¨¡å‹ç­‰ä¸å­˜åœ¨ |
   | 40300 | ç¦æ­¢è®¿é—® | è´¦å·çŠ¶æ€å¼‚å¸¸ç­‰ |
   | 50000 | ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸ | ç½‘ç»œæŠ–åŠ¨ï¼Œæ•°æ®åº“æ“ä½œå¤±è´¥ç­‰ |
   | 50001 | æ“ä½œå¤±è´¥ | é™æµç­‰ |



## ğŸ”§ æ„¿æ™¯

- æ”¯æŒä¸šåŠ¡ç ”å‘äººå‘˜é€šè¿‡å¼€å‘è‡ªå®šä¹‰ç»„ä»¶çš„æ–¹å¼æ‰©å±•APIç½‘å…³èƒ½åŠ›ã€‚
- ä¸šåŠ¡ç ”å‘äººå‘˜é…ç½®å¥½APIï¼Œå¯ä»¥è‡ªåŠ¨ç”ŸæˆAPIçš„å‰åç«¯äº¤äº’æ–‡æ¡£å’Œå®¢æˆ·ç«¯SDKï¼Œæ–¹ä¾¿å‰åç«¯å¼€å‘äººå‘˜è¿›è¡Œäº¤äº’ã€è”è°ƒã€‚
- æä¾›åŠ è½½è‡ªå®šä¹‰ç»„ä»¶èƒ½åŠ›ï¼Œæ”¯æŒä¸šåŠ¡å®Œæˆä¸€äº›è‡ªå®šä¹‰é€»è¾‘çš„æ‰©å±•ã€‚ 





## ğŸ”— ç›¸å…³é“¾æ¥

- [å¼€æº](https://github.com/pcpengchan)
- å¯¹äºä¸€äº› Bug ä¿®å¤å’Œç»†èŠ‚ä¼˜åŒ–ï¼Œæ¬¢è¿ç›´æ¥æäº¤ PR ğŸŒ¹ æˆ–è”ç³»ä½œè€…,telï¼š18128332989
